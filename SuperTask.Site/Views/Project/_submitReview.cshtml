@model Review
@if (Model != null)
{
	<form id="SubmitReview" class="form-horizontal details" action="@Url.Action("SubmitReviewAction", "Project")" role="form" data-after-success="afterReviewSubmitSuccess()">
		<div class="row">
			@Html.HiddenFor(r => r.ReviewId)
			@Html.HiddenFor(r => r.ProjectId)
			@Html.HiddenFor(r => r.SendDate)
			@Html.HiddenFor(r => r.SenderID)
			@Html.HiddenFor(r => r.ReceiverID)
			@Html.HiddenFor(r => r.Result)

			@if (Model.ReceiverID == Html.GetUserProfile().UserId)
			{
				<div class="form-group">
					@Html.Label("", "审核请求说明", new { @class = "control-label col-md-4" })
					@*@Html.LabelFor(r => r.Comment, new { @class = "control-label col-md-4" })*@
					<div class="col-md-4">
						@Html.TextAreaFor(r => r.Comment, 5, 5, new { @class = "form-control", @readonly = "readonly" })
					</div>
				</div>
				<div class="form-group">
					@Html.LabelFor(r => r.ReviewComment, new { @class = "control-label col-md-4" })
					<div class="col-md-4">
						@Html.TextAreaFor(r => r.ReviewComment, 5, 5, new { @class = "form-control" })
					</div>
				</div>


				<div class="form-group">
					<div class="col-md-4 col-md-offset-5">
						<button class="btn btn-success btn-submit" id="ReviewSuccess">审核通过</button>
						<button class="btn btn-danger btn-submit" id="ReviewFailure">审核不通过</button>
					</div>
				</div>
			}
			else
			{
				<div class="form-group">
					@Html.LabelFor(r => r.ReviewComment, new { @class = "control-label col-md-4" })
					<div class="col-md-4">
						@Html.TextAreaFor(r => r.ReviewComment, 5, 5, new { @class = "form-control", @readonly="readonly" })
					</div>
				</div>
			}
		</div>

	</form>

	<script>
		function afterReviewSubmitSuccess() { location.href = location.href; }

		$(function () {

			ajaxSubmitForm($('#SubmitReview'));

			$('.btn-submit').on('click', function () {
				var id = $(this).attr('id');
				if (id == 'ReviewSuccess')
					$('#Result').val('@ReviewKeys.ResultSuccess');
				else {
					$('#Result').val('@ReviewKeys.ResultFailed');
				}
			})

		});
	</script>
}